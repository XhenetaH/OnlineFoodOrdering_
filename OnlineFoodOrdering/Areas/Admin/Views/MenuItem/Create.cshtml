@model OnlineFoodOrdering.Models.ViewModels.MenuItemViewModel
@using OnlineFoodOrdering.Extensions
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer

<div class="myaccount-content">
    <h3>@localizer["New Menu Item"]</h3>
    <div class="account-details-form">
        <form method="post" enctype="multipart/form-data">
            <div class="row">
                <div class="single-input-item mb-3">
                    <label for="first-name" class="required mb-1">@localizer["Name"]</label>
                    <input asp-for="MenuItem.Name" />
                </div>
                <div class="single-input-item mb-3">
                    <label for="first-name" class="required mb-1">@localizer["Description"]</label>
                    <input asp-for="MenuItem.Description" />
                </div>
                <div class="single-input-item mb-3">
                    <label for="first-name" class="required mb-1">@localizer["Price"]</label>
                    <input asp-for="MenuItem.Price" />
                </div>
                <div class="single-input-item mb-3">
                    <label asp-for="MenuItem.CategoryId" class="required mb-1"></label>
                    <select asp-for="@Model.MenuItem.CategoryId" id="CategoryId" asp-items="Model.Category.ToSelectListItem(Model.MenuItem.CategoryId)" class="form-control"></select>
                </div>
                <div class="single-input-item mb-3">
                    <label asp-for="MenuItem.SubCategoryId" class="required mb-1"></label>
                    <select asp-for="@Model.MenuItem.SubCategoryId" name="SubCategoryId" id="SubCategoryId" asp-items="@(new SelectList(string.Empty,"Id","Name"))" class="form-control"></select>
                </div>
                <div class="single-input-item mb-3">
                    <label for="first-name" class="required mb-1">@localizer["Image"]</label>
                    <input type="file" name="files" multiple class="form-control" />
                </div>
                <div class="single-input-item mb-3">
                    <label for="first-name" class="required mb-1">Spyciness</label>
                    <select asp-for="MenuItem.Spicyness" asp-items="Html.GetEnumSelectList<MenuItem.ESpicy>()" class="form-control"></select>

                </div>
                <div class="custom-control custom-checkbox">
                    <input type="checkbox" class="custom-control-input" asp-for="MenuItem.isFeatured">
                    <label class="custom-control-label">@localizer["Is Featured"]</label>
                </div>

            </div>

            <br />
            <div class="single-input-item single-item-button">
                <button type="submit" asp-route-menuitem="@Model.MenuItem" class="btn obrien-button primary-btn" value="Save Changes">@localizer["Create New"] </button>
            </div>

        </form>
    </div>
</div>



<script type="text/javascript">
            $(document).ready(function () {
                getSubCategory();
                $('#CategoryId').change(function () {
                    getSubCategory();
                });
            });


            function getSubCategory() {
                    var url = '@Url.Content("~/")' + "Admin/SubCategory/GetSubCategory";
                    var ddlsource = '#CategoryId';
                    $.getJSON(url, { id: $(ddlsource).val() }, function (data) {
                        var items = '';
                        $('#SubCategoryId').empty();
                        $.each(data, function (i, subcategory) {
                            items += "<option value='" + subcategory.value + "'>" + subcategory.text + "</option>";
                        });
                        $('#SubCategoryId').html(items);
                    })
                }
</script>

